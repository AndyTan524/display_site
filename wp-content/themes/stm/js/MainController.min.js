String.prototype.startsWith = function (n) {
	return this.slice(0, n.length) == n
};
var app = angular.module("windward");
app.controller("MainController", ["$scope", "$rootScope", "$timeout", "$window", "$http", "$analytics", function (n, e, t, o, i, a) {
	function r() {
		var n = document.body || document.documentElement, e = n.style, t = "transition";
		if ("string" == typeof e[t]) return !0;
		var o = ["Moz", "webkit", "Webkit", "Khtml", "O", "ms"];
		t = t.charAt(0).toUpperCase() + t.substr(1);
		for (var i = 0; i < o.length; i++) if ("string" == typeof e[o[i] + t]) return !0;
		return !1
	}

	function l() {
		O = 0;
		var o = window.location.hash;
		o.startsWith("#/company") ? (n.currentPage = "#/company", c(), n.companyPage = !0, n.solutionsPage = !1, n.menuL = !1, t(function () {
			n.companyLoad = !0, n.solutionsLoad = !1, n.solutionsAnim = !1, t(function () {
				n.innerLoading = 2
			}, F), t(function () {
				v = document.querySelectorAll("#AIS_1, #AIS_2"), w = document.querySelectorAll("#SHIPS_2, #SHIPS_4"), S = document.querySelectorAll("#SHIPS_1, #SHIPS_3, #strokes"), y = document.querySelectorAll("#base"), b = document.querySelectorAll("#founding_p"), T = document.querySelectorAll("#ocean20"), C = document.querySelectorAll("#bottomShips, #topSips")
			}, 0), t(function () {
				n.companyAnim = !0
			}, 1.6 * F)
		}, F), t(function () {
			$(".open_positions ul").niceScroll({
				cursorborder: "none",
				cursorwidth: 17,
				cursorfixedheight: 17,
				cursorborderradius: 0,
				horizrailenabled: !1,
				autohidemode: !1
			})
		}, 1e3)) : o.startsWith("#/solutions") ? (n.currentPage = "#/solutions", c(), n.solutionsPage = !0, n.companyPage = !1, n.finInner = !1, n.intInner = !1, n.menuR = !1, t(function () {
			n.solutionsLoad = !0, n.companyLoad = !1, n.companyAnim = !1, n.innerScrollSecond = !1, t(function () {
				n.innerLoading = 2
			}, F), t(function () {
				A = document.querySelectorAll(".intfin_svg svg"), P = document.querySelector(".vi_lines"), W = document.querySelectorAll(".vi_li li"), k = document.querySelectorAll(".pause.t, .pause.b "), t(function () {
					0 == e.touchDevice && (createCanvas(), L = document.querySelector("#closing canvas"))
				}, 1e3)
			}, 0), t(function () {
				n.solutionsAnim = !0
			}, 1.6 * F)
		}, F)) : o.startsWith("#/news") ? (n.currentPage = "#/news", n.newsUp = !0) : (n.currentPage = "#/home", n.newsUp = !1, n.hideMainLinks = !1, n.innerPage = !1, n.companyPage = !1, n.solutionsPage = !1, t(function () {
			n.companyLoad = !1, n.solutionsLoad = !1, n.companyAnim = !1, n.solutionsAnim = !1, n.menuR = !1, n.menuL = !1, t(function () {
				n.innerLoading = 0
			}, 100)
		}, 1.5 * F), t(function () {
			n.HpAnim = !0
		}, 100), t.cancel(j))
	}

	function c() {
		var o, i = window.location.hash, a = i.slice(n.currentPage.length);
		_[a] && (O = _[a], o = _[a] * M), n.HpAnim = !1, n.innerPage = !0, 2 === n.innerLoading && (n.innerLoading = 1), n.innerLoadingAnim = !0, j = t(function () {
			n.hideMainLinks = !0, t(function () {
				n.innerLoadingAnim = !1
			}, 2 * F)
		}, F / 2), t(function () {
			var n = o ? o : 0;
			H.refresh(), H.setScrollTop(n, [force = !0]), H.refresh(), e.touchDevice === !1 ? d() : m(), u(), s()
		}, 2 * F)
	}

	function s() {
		O == z ? t(function () {
			n.mouseCursor = "up"
		}, 0) : 0 == O ? t(function () {
			n.mouseCursor = "down"
		}, 0) : t(function () {
			n.mouseCursor = "drag"
		}, 0)
	}

	function u() {
		var n = H.getMaxScrollTop();
		z = n / M
	}

	function d() {
		var e, t = 0, o = !1;
		$(".inner").on({
			mousemove: function (n) {
				o && i(n)
			}, mousedown: function (i) {
				o = !0, e = i.pageY, t = H.getScrollTop(), n.mouseCursor = "dragging", n.$apply()
			}, mouseup: function (e) {
				o = !1, H.getScrollTop() > t + 50 ? O += 1 : H.getScrollTop() < t - 50 && (O -= 1), H.animateTo(O * M, {
					duration: F,
					easing: "swing"
				}), s(), n.$apply()
			}
		});
		var i = function (n) {
			H.setScrollTop(H.getScrollTop() + (e - n.pageY), [force = !0])
		}
	}

	function m() {
		var n = 0, e = 0;
		$(".inner").on({
			touchstart: function (t) {
				e = t.pageY, n = H.getScrollTop()
			}, touchend: function (e) {
				t(function () {
					H.getScrollTop() > n + 50 ? O += 1 : H.getScrollTop() < n - 50 && (O -= 1), H.animateTo(O * M + M, {
						duration: F,
						easing: "swing"
					})
				}, 0)
			}
		})
	}

	function g() {
		var n = "提供住宿";
		String.prototype.shuffle = function () {
			for (var n = this.split(""), e = n.length, t = e - 1; t > 0; t--) {
				var o = Math.floor(Math.random() * (t + 1)), i = n[t];
				n[t] = n[o], n[o] = i
			}
			return n.join("")
		};
		var e = n.shuffle();
		$("#shuffle").text(e)
	}

	function p() {
		H.refresh(), H.setScrollTop(O * M + M, [force = !0])
	}

	function h(e) {
		if (e === f || D) return void(D = null);
		var t = n.locale + e;
		a.pageTrack(t), f = e
	}

	var f, v, w, S, y, b, T, C, A, P, W, k, L, M = 1e3, O = 0;
	n.AnimCompany = !1, n.AnimSolutions = !1, n.newsUp = !1, n.Math = window.Math, n.transitionSupported = !0;
	var D = !0, x = {
		0: "/OurStory/",
		1: "/OurStory/1",
		2: "/OurStory/2",
		3: "/OurStory/3",
		4: "/MaritimeBigData/",
		5: "/MaritimeBigData/1",
		6: "/MaritimeBigData/2",
		7: "/WindwardFounding/",
		8: "/WindwardFounding/1",
		9: "/WindwardFounding/2",
		10: "/LifeatWindward/",
		11: "/OurCrew/",
		12: "/InvestorsAndAdvisors/",
		13: "/Job/",
		14: "/Contacts/"
	}, I = {
		0: "/YourOceanSolved/",
		1: "/YourOceanSolved/1",
		2: "/WhyWindward/",
		3: "/WhyWindward/1",
		4: "/WhyWindward/2",
		5: "/WindwardEdge/",
		6: "/WindwardEdge/1",
		7: "/WindwardEdge/2",
		8: "/Intelligent-Finance/",
		9: "/PartingThought/"
	}, _ = {
		"/OurStory/": 0,
		"/OurStory/1": 1,
		"/OurStory/2": 2,
		"/OurStory/3": 3,
		"/MaritimeBigData/": 4,
		"/MaritimeBigData/1": 5,
		"/MaritimeBigData/2": 6,
		"/WindwardFounding/": 7,
		"/WindwardFounding/1": 8,
		"/WindwardFounding/2": 9,
		"/LifeatWindward/": 10,
		"/OurCrew/": 11,
		"/InvestorsAndAdvisors/": 12,
		"/Job/": 13,
		"/Contacts/": 14,
		"/YourOceanSolved/": 0,
		"/YourOceanSolved/1": 1,
		"/WhyWindward/": 2,
		"/WhyWindward/1": 3,
		"/WhyWindward/2": 4,
		"/WindwardEdge/": 5,
		"/WindwardEdge/1": 6,
		"/WindwardEdge/2": 7,
		"/Intelligent-Finance/": 8,
		"/PartingThought/": 9
	};
	r() === !1 && (n.transitionSupported = !1), n.ie = !1, (window.ActiveXObject || "ActiveXObject" in window) && (n.ie = !0), e.touchDevice = !1, /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && (e.touchDevice = !0), n.windowLoad = !1, window.onload = function () {
		t(function () {
			n.windowLoad = !0
		}, 10)
	}, n.btnCompany = 0, n.btnSolutions = 0;
	var B, q;
	n.btnRhandler = function (e, o) {
		"in" === e ? (t.cancel(B), n.btnCompany = 1) : (n.btnCompany = 2, B = t(function () {
			n.btnCompany = 0
		}, o))
	}, n.btnLhandler = function (e, o) {
		"in" === e ? (t.cancel(q), n.btnSolutions = 1) : (n.btnSolutions = 2, q = t(function () {
			n.btnSolutions = 0
		}, o))
	}, n.hireBtnHandler = function () {
		n.hireBtnOut = !0, t(function () {
			n.hireBtnOut = !1
		}, 200), t(function () {
			n.hireBtnReset = !0, t(function () {
				n.hireBtnReset = !1
			}, 200)
		}, 200)
	};
	var F = 700;
	n.HpAnim = !1, n.innerLoading = 0, n.innerLoadingAnim = !1, n.innerPage = !1, n.hideMainLinks = !1;
	var j;
	n.companyPage = !1, n.solutionsPage = !1, n.companyLoad = !1, n.solutionsLoad = !1, n.companyAnim = !1, n.solutionsAnim = !1, n.menuR = !1, n.menuL = !1, $(o).bind("hashchange", function () {
		t(function () {
			n.currentPage && !window.location.hash.startsWith(n.currentPage) && l()
		}, 10)
	}), l();
	var H = skrollr.init({
		render: function (o) {
			n.solutionsPage === !0 && (I[o.curTop / M] && (window.location.hash = n.currentPage + I[o.curTop / M], h("/solutions" + I[o.curTop / M])), this.getScrollTop() >= 8 * M && this.getScrollTop() < 8.2 * M ? angular.element(A).addClass("active") : angular.element(A).removeClass("active"), this.getScrollTop() >= 6 * M && this.getScrollTop() < 6.2 * M ? (angular.element(P).addClass("active"), angular.element(W).addClass("active")) : (angular.element(P).removeClass("active"), angular.element(W).removeClass("active")), this.getScrollTop() >= 7 * M && this.getScrollTop() < 7.2 * M ? angular.element(k).addClass("active") : angular.element(k).removeClass("active"), 0 == e.touchDevice && (this.getScrollTop() >= 9e3 ? (angular.element(L).addClass("active"), ctx.start()) : (angular.element(L).removeClass("active"), ctx.stop()))), n.companyPage === !0 && (x[o.curTop / M] && (window.location.hash = n.currentPage + x[o.curTop / M], h("/company" + x[o.curTop / M])), this.getScrollTop() >= 4 * M && this.getScrollTop() < 4.2 * M ? angular.element(v).addClass("active") : angular.element(v).removeClass("active"), this.getScrollTop() >= 5 * M && this.getScrollTop() < 6.2 * M ? angular.element(w).addClass("active") : angular.element(w).removeClass("active"), this.getScrollTop() >= 6 * M && this.getScrollTop() < 6.2 * M ? angular.element(S).addClass("active") : angular.element(S).removeClass("active"), this.getScrollTop() >= 8 * M && this.getScrollTop() < 9.2 * M ? (angular.element(y).addClass("active"), angular.element(b).addClass("active")) : (angular.element(y).removeClass("active"), angular.element(b).removeClass("active")), this.getScrollTop() >= 9 * M && this.getScrollTop() < 9.2 * M ? (angular.element(T).addClass("active"), angular.element(C).addClass("active"), clearInterval(Y), Y = setInterval(function () {
				g()
			}, 50), t(function () {
				clearInterval(Y), $("#shuffle").text("提供住宿222")
			}, 600)) : (angular.element(T).removeClass("active"), angular.element(C).removeClass("active"), clearInterval(Y)))
		}, smoothScrolling: !1, mobileDeceleration: 1
	});
	if (e.touchDevice === !1) {
		var E = 0, R = 250;
		n.mouseWheelHandler = function (n, e, t, o) {
			var i = (new Date).getTime(), a = o;
			return R + F > i - E ? void n.preventDefault() : (E = i, -1 == a ? O = Math.min(O + 1, z) : 1 == a && (O = Math.max(O - 1, 0)), H.animateTo(O * M, {
				duration: F,
				easing: "swing"
			}), void s())
		}
	}
	var z = 0, Y = 0;
	n.crews = [{
		name: "杜洪飞",
		title: "Co-founder & CEO",
		linkedin: "http://il.linkedin.com/in/amidaniel",
		twitter: "https://twitter.com/AmiDaniel1",
		bg: "url(css/img/1.jpg)",
		index: 0
	}, {
		name: "姜泽兴",
		title: "Co-founder, VP Product",
		linkedin: "http://il.linkedin.com/pub/matan-peled/62/3bb/895",
		bg: "url(css/img/2.jpg)",
		index: 1
	}, /*{
		name: "Ilan Atias",
		title: "VP R&D",
		linkedin: "http://il.linkedin.com/pub/ilan-atias/2/261/a72",
		bg: "url(css/img/4.jpg)",
		index: 3
	}, {
		name: "Michal Chafets",
		title: "VP Marketing & Communications",
		linkedin: "https://www.linkedin.com/in/mchafets",
		bg: "url(css/img/6.jpg)",
		index: 4
	}, {
		name: "Alon Podhurst",
		title: "VP Sales",
		linkedin: "https://www.linkedin.com/pub/alon-podhurst/0/80/149",
		bg: "url(css/img/3.jpg)",
		index: 5
	},*/ {
		name: "Erez Katan",
		title: "CFO",
		linkedin: "https://www.linkedin.com/in/erez-katan-3b92b",
		bg: "url(css/img/4.jpg)",
		index: 6
	}], n.investorList = [{
		name: "General David H. Petraeus, U.S. Army (Ret.)",
		linkedin: "https://www.linkedin.com/in/davidpetraeus",
		index: 0
	}, {
		name: "Dan Senor",
		website: "http://www.foreignpolicyi.org/content/dan-senor",
		index: 1
	}, {name: "Horizons Ventures", website: "http://www.horizonsventures.com/", index: 2}, {
		name: "Tom Glocer",
		website: "http://www.tomglocer.com/",
		index: 3
	}, {name: "Lt. Gen. Ashkenazi (Ret)", index: 5}, {
		name: "Aleph Ventures",
		website: "http://aleph.vc/",
		index: 4
	}], n.clickToScroll = function (n) {
		if (O > n || n - 2 > O) {
			var e = document.querySelector(".inner");
			angular.element(e).removeClass("fade_in"), t(function () {
				angular.element(e).addClass("fade_in"), O = n, H.setScrollTop(M * O, [force = !0])
			}, 0)
		} else O = n, H.animateTo(M * O, {duration: F, easing: "swing"});
		t(function () {
			s()
		}, 0)
	}, n.arrowScroll = function () {
		z > O && (O += 1), t(function () {
			H.animateTo(O * M, {duration: F, easing: "swing"}), s()
		}, 0)
	};
	var U;
	window.onresize = function () {
		clearTimeout(U), U = setTimeout(p, 200)
	}, angular.element(document).ready(function () {
		0 == e.touchDevice && $("#news_wrapper, .news_scroll").niceScroll({
			cursorcolor: "#878787",
			background: "#545454",
			cursorborder: "none",
			horizrailenabled: !1
		})
	}), n.submitForm = function (e) {
		if (n.invalidBink = !1, e.$valid) {
			var o = "/es" === n.locale ? "es-" : "en-";
			a.eventTrack(o + "contactus", {
				category: "submit",
				label: "formsubmit"
			}), n.formSuccess = !1, n.formFailed = !1, n.formSubmitted = !0;
			var i = $("#win_form").serialize();
			return $.ajax({
				url: "/contact.php", type: "POST", data: i, dataType: "json", success: function (e) {
					var t = e && e.status && e.status.success;
					t ? (n.formSuccess = !0, n.formSubmitted = !1, n.formFailed = !1) : (n.formSuccess = !1, n.formSubmitted = !1, n.formFailed = !0), n.$apply()
				}
			}), !1
		}
		t(function () {
			n.invalidBink = !0
		}, 10)
	}
}]);