var app=angular.module("windward");app.controller("m.MainController",["$scope","$timeout","$window","$http","$analytics",function(n,e,o,i,a){function t(n,e){var o=this;return o.hash=n,o.selector=e.selector,o.jQ=$(o.selector),o.getOffsetTop=function(){return o.jQ.offset().top},o}function l(e){n.scrollPages=[];for(var o in e){var i=new t(o,e[o]);n.scrollPages.push(i)}n.activeScrollPage=n.scrollPages[0]}function s(){var o=window.location.hash;if("#/company"===o||"#/company-come-aboard"===o){var i="#/company-come-aboard"===o?!0:null;c(i),n.companyPage=!0,n.solutionsPage=!1,n.menuL=!1,e(function(){n.companyLoad=!0,n.solutionsLoad=!1,e(function(){n.innerLoading=2,l(u)},300)},d)}else"#/solutions"===o?(c(),n.solutionsPage=!0,n.companyPage=!1,n.finInner=!1,n.intInner=!1,n.menuR=!1,e(function(){n.solutionsLoad=!0,n.companyLoad=!1,n.innerScrollSecond=!1,e(function(){n.innerLoading=2,l(m)},300)},d)):"#/news"===o?n.newsUp=!0:(n.companyMenu=!1,n.solutionsMenu=!1,n.newsUp=!1,n.innerPage=!1,n.companyPage=!1,n.solutionsPage=!1,e(function(){n.companyLoad=!1,n.solutionsLoad=!1,n.menuR=!1,n.menuL=!1,e(function(){n.innerLoading=0},10)},1.5*d))}function c(o){n.innerPage=!0,n.companyMenu=!1,n.solutionsMenu=!1,2===n.innerLoading&&(n.innerLoading=1),n.innerLoadingAnim=!0,$("body").animate({scrollTop:0},500),e(function(){n.innerLoadingAnim=!1,o&&n.clickToScroll("#come_aboard")},2*d)}n.windowLoad=!1,n.mainAnim=!1;var r=$(o).height();n.windowLoad=!1,window.onload=function(){e(function(){n.windowLoad=!0},10)};var d=700;n.innerLoading=0,n.innerLoadingAnim=!1,n.innerPage=!1,n.companyPage=!1,n.solutionsPage=!1,n.companyLoad=!1,n.solutionsLoad=!1,n.menuR=!1,n.menuL=!1,$(o).bind("hashchange",function(){e(function(){s()},10)}),n.scrollPages=[];var u={"/company/OurStory/":{selector:".intro"},"/company/MaritimeBigData/":{selector:"#sat"},"/company/WindwardFounding/":{selector:"#founding"},"/company/LifeatWindward/":{selector:"#team"},"/company/OurCrew/":{selector:"#crew"},"/company/InvestorsAndAdvisors/":{selector:"#investors"},"/company/Job/":{selector:"#come_aboard"},"/company/Contacts/":{selector:"#contact"}},m={"/solutions/YourOceanSolved/":{selector:".intro"},"/solutions/WhyWindward/":{selector:"#why"},"/solutions/WindwardEdge/":{selector:"#edge"},"/solutions/Intelligent-Finance/":{selector:"#intelligence"},"/solutions/PartingThought/":{selector:"#closing"}};$(o).on("scroll",function(){var o,i;n.scrollPages.forEach(function(n,e){var a=n.getOffsetTop()-$(window).scrollTop();(!o&&0!==o||r/3>a)&&(o=a,i=e)}),e(function(){n.activeScrollPage=n.innerLoadingAnim?!1:n.scrollPages[i]},0)}),s(),n.crews=[{name:"Ami Daniel",title:"Co-founder & CEO",linkedin:"http://il.linkedin.com/in/amidaniel",twitter:"https://twitter.com/AmiDaniel1",bg:"url(css/img/1.jpg)",index:0},{name:"Matan Peled",title:"Co-founder, VP Product",linkedin:"http://il.linkedin.com/pub/matan-peled/62/3bb/895",bg:"url(css/img/2.jpg)",index:1},{name:"Ilan Atias",title:"VP R&D",linkedin:"http://il.linkedin.com/pub/ilan-atias/2/261/a72",bg:"url(css/img/4.jpg)",index:2},{name:"Michal Chafets",title:"VP Marketing & Communications",linkedin:"https://www.linkedin.com/in/mchafets",bg:"url(css/img/6.jpg)",index:3},{name:"Alon Podhurst",title:"VP Sales",linkedin:"https://www.linkedin.com/pub/alon-podhurst/0/80/149",bg:"url(css/img/3.jpg)",index:4},{name:"Erez Katan",title:"CFO",linkedin:"https://www.linkedin.com/in/erez-katan-3b92b",bg:"url(css/img/6_1.jpg)",index:5}],n.investorList=[{name:"General David H. Petraeus, U.S. Army (Ret.)",linkedin:"https://www.linkedin.com/in/davidpetraeus",index:0},{name:"Dan Senor",website:"http://www.foreignpolicyi.org/content/dan-senor",index:1},{name:"Horizons Ventures",website:"http://www.horizonsventures.com/",index:2},{name:"Tom Glocer",website:"http://www.tomglocer.com/",index:3},{name:"Lt. Gen. Ashkenazi (Ret)",index:4},{name:"Aleph Ventures",website:"http://aleph.vc/",index:5}],n.clickToScroll=function(e){n.companyMenu=!1,n.solutionsMenu=!1;var o=$(e).offset().top;$("body").animate({scrollTop:o},500)},n.submitForm=function(o){if(n.invalidBink=!1,o.$valid){var i="/es"===n.locale?"es-":"en-";a.eventTrack(i+"contactus",{category:"submit",label:"formsubmit"}),n.formSuccess=!1,n.formFailed=!1,n.formSubmitted=!0;var t=$("#win_form").serialize();return $.ajax({url:"/contact.php",type:"POST",data:t,dataType:"json",success:function(e){var o=e&&e.status&&e.status.success;o?(n.formSuccess=!0,n.formSubmitted=!1,n.formFailed=!1):(n.formSuccess=!1,n.formSubmitted=!1,n.formFailed=!0),n.$apply()}}),!1}e(function(){n.invalidBink=!0},10)},n.$watch("activeScrollPage",function(e,o){e&&e!==o&&e.hash&&a.pageTrack(n.locale+e.hash)},!1)}]);